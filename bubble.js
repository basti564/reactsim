class Ball{constructor(t,i,e,s){this.position=t,this.velocity=p5.Vector.random2D(),this.velocity.mult(e),this.r=i,this.m=.1*i,this.type=s}update(){this.position.add(this.velocity)}checkBoundaryCollision(){this.position.x>width-this.r?(this.position.x=width-this.r,this.velocity.x*=-1):this.position.x<this.r?(this.position.x=this.r,this.velocity.x*=-1):this.position.y>height/2-this.r?(this.position.y=height/2-this.r,this.velocity.y*=-1):this.position.y<this.r&&(this.position.y=this.r,this.velocity.y*=-1)}checkCollision(t){return p5.Vector.sub(t.position,this.position).mag()<this.r+t.r}collide(t){let i=p5.Vector.sub(t.position,this.position),e=i.mag(),s=(this.r+t.r-e)/2,o=i.copy().normalize().mult(s);t.position.add(o),this.position.sub(o);let y=i.heading(),c=sin(y),h=cos(y),l=[new p5.Vector,new p5.Vector];l[1].x=h*i.x+c*i.y,l[1].y=h*i.y-c*i.x;let p=[new p5.Vector,new p5.Vector];p[0].x=h*this.velocity.x+c*this.velocity.y,p[0].y=h*this.velocity.y-c*this.velocity.x,p[1].x=h*t.velocity.x+c*t.velocity.y,p[1].y=h*t.velocity.y-c*t.velocity.x;let r=[new p5.Vector,new p5.Vector];r[0].x=((this.m-t.m)*p[0].x+2*t.m*p[1].x)/(this.m+t.m),r[0].y=p[0].y,r[1].x=((t.m-this.m)*p[1].x+2*this.m*p[0].x)/(this.m+t.m),r[1].y=p[1].y,l[0].x+=r[0].x,l[1].x+=r[1].x;let a=[new p5.Vector,new p5.Vector];a[0].x=h*l[0].x-c*l[0].y,a[0].y=h*l[0].y+c*l[0].x,a[1].x=h*l[1].x-c*l[1].y,a[1].y=h*l[1].y+c*l[1].x,t.position.x=this.position.x+a[1].x,t.position.y=this.position.y+a[1].y,this.position.add(a[0]),this.velocity.x=h*r[0].x-c*r[0].y,this.velocity.y=h*r[0].y+c*r[0].x,t.velocity.x=h*r[1].x-c*r[1].y,t.velocity.y=h*r[1].y+c*r[1].x}react(t){var i=t.type+this.type;switch(rType){case"Red+Yellow <-> Blue+Green":switch(i){case 3:fA<=this.velocity.mag()+t.velocity.mag()&&(t.type=4,this.type=8);break;case 12:bA<=this.velocity.mag()+t.velocity.mag()&&(t.type=1,this.type=2)}break;case"Red+Yellow <-> 2Blue":switch(i){case 3:fA<=this.velocity.mag()+t.velocity.mag()&&(t.type=8,this.type=8);break;case 16:bA<=this.velocity.mag()+t.velocity.mag()&&(t.type=1,this.type=2)}break;case"Red+Yellow <-> Blue+Green | Red+Black -> 'gone'":switch(i){case 17:t.type=0,this.type=0;break;case 3:fA<=this.velocity.mag()+t.velocity.mag()&&(t.type=4,this.type=8);break;case 12:bA<=this.velocity.mag()+t.velocity.mag()&&(t.type=1,this.type=2)}}}display(){switch(noStroke(),this.type){case 1:fill(colors[1]);break;case 2:fill(colors[2]);break;case 4:fill(colors[3]);break;case 8:fill(colors[4]);break;case 16:fill(colors[5]);break;default:fill(colors[0])}ellipse(this.position.x,this.position.y,2*this.r,2*this.r)}}
