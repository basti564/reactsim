class Ball{constructor(i,t,s,o){this.position=i,this.velocity=p5.Vector.random2D(),this.velocity.mult(s),this.r=t,this.m=.1*t,this.type=o}update(){this.position.add(this.velocity)}checkBoundaryCollision(){this.position.x>width-this.r?(this.position.x=width-this.r,this.velocity.x*=-1):this.position.x<this.r?(this.position.x=this.r,this.velocity.x*=-1):this.position.y>height/2-this.r?(this.position.y=height/2-this.r,this.velocity.y*=-1):this.position.y<this.r&&(this.position.y=this.r,this.velocity.y*=-1)}checkCollision(i){return p5.Vector.sub(i.position,this.position).mag()<this.r+i.r}collide(i){let t=p5.Vector.sub(i.position,this.position),s=t.mag(),o=(this.r+i.r-s)/2,e=t.copy().normalize().mult(o);i.position.add(e),this.position.sub(e);let y=t.heading(),h=sin(y),c=cos(y),l=[new p5.Vector,new p5.Vector];l[1].x=c*t.x+h*t.y,l[1].y=c*t.y-h*t.x;let p=[new p5.Vector,new p5.Vector];p[0].x=c*this.velocity.x+h*this.velocity.y,p[0].y=c*this.velocity.y-h*this.velocity.x,p[1].x=c*i.velocity.x+h*i.velocity.y,p[1].y=c*i.velocity.y-h*i.velocity.x;let r=[new p5.Vector,new p5.Vector];r[0].x=((this.m-i.m)*p[0].x+2*i.m*p[1].x)/(this.m+i.m),r[0].y=p[0].y,r[1].x=((i.m-this.m)*p[1].x+2*this.m*p[0].x)/(this.m+i.m),r[1].y=p[1].y,l[0].x+=r[0].x,l[1].x+=r[1].x;let a=[new p5.Vector,new p5.Vector];a[0].x=c*l[0].x-h*l[0].y,a[0].y=c*l[0].y+h*l[0].x,a[1].x=c*l[1].x-h*l[1].y,a[1].y=c*l[1].y+h*l[1].x,i.position.x=this.position.x+a[1].x,i.position.y=this.position.y+a[1].y,this.position.add(a[0]),this.velocity.x=c*r[0].x-h*r[0].y,this.velocity.y=c*r[0].y+h*r[0].x,i.velocity.x=c*r[1].x-h*r[1].y,i.velocity.y=c*r[1].y+h*r[1].x}react(i){var t=i.type+this.type;switch(17==t&&(i.type=0,this.type=0),rType){case"R+Y<->B+G":switch(t){case 3:fA<=this.velocity.mag()+i.velocity.mag()&&(i.type=4,this.type=8);break;case 12:bA<=this.velocity.mag()+i.velocity.mag()&&(i.type=1,this.type=2)}break;case"R+Y<->2B":switch(t){case 3:fA<=this.velocity.mag()+i.velocity.mag()&&(i.type=8,this.type=8);break;case 16:bA<=this.velocity.mag()+i.velocity.mag()&&(i.type=1,this.type=2)}}}display(){switch(noStroke(),this.type){case 1:fill(colors[1]);break;case 2:fill(colors[2]);break;case 4:fill(colors[3]);break;case 8:fill(colors[4]);break;case 16:fill(colors[5]);break;default:fill(colors[0])}ellipse(this.position.x,this.position.y,2*this.r,2*this.r)}}